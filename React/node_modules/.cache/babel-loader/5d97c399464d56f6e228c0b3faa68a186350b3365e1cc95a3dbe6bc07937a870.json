{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Alexandre/Documents/GitHub/Projeto_Linos/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Alexandre/Documents/GitHub/Projeto_Linos/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/Users/Alexandre/Documents/GitHub/Projeto_Linos/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nexport var useFetch = function useFetch(url) {\n  _s();\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    config = _useState4[0],\n    setConfig = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    method = _useState6[0],\n    setMethod = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    callFetch = _useState8[0],\n    setCallFetch = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    loading = _useState10[0],\n    setLoading = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    error = _useState12[0],\n    setError = _useState12[1];\n  var httpConfig = function httpConfig(data, method) {\n    if (method === \"POST\") {\n      setConfig({\n        method: method,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      });\n      setMethod(method);\n    }\n    ;\n  };\n  useEffect(function () {\n    // pega a requisição\n\n    var fetchData = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res, json;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              //loading\n              setLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return fetch(url);\n            case 4:\n              res = _context.sent;\n              _context.next = 7;\n              return res.json();\n            case 7:\n              json = _context.sent;\n              setData(json);\n              _context.next = 15;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0.message);\n              setError(\"Houve algum erro ao carregar os dados\");\n            case 15:\n              setLoading(false);\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 11]]);\n      }));\n      return function fetchData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    fetchData();\n  }, [url, callFetch]);\n  useEffect(function () {\n    // verifica as requisições e atualiza\n    var httpRequest = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var fetchOptions, res, json;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(method === \"POST\")) {\n                _context2.next = 9;\n                break;\n              }\n              fetchOptions = [url, config];\n              _context2.next = 4;\n              return fetch.apply(void 0, fetchOptions);\n            case 4:\n              res = _context2.sent;\n              _context2.next = 7;\n              return res.json();\n            case 7:\n              json = _context2.sent;\n              setCallFetch(json);\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function httpRequest() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    httpRequest();\n  }, [config, method, url]);\n  return {\n    data: data,\n    httpConfig: httpConfig,\n    loading: loading,\n    error: error\n  };\n};\n_s(useFetch, \"vma3ZBRq6jbC864DQROMcBHFkwo=\");","map":{"version":3,"names":["useState","useEffect","useFetch","url","_s","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","config","setConfig","_useState5","_useState6","method","setMethod","_useState7","_useState8","callFetch","setCallFetch","_useState9","_useState10","loading","setLoading","_useState11","_useState12","error","setError","httpConfig","headers","body","JSON","stringify","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","json","wrap","_callee$","_context","prev","next","fetch","sent","t0","console","log","message","stop","apply","arguments","httpRequest","_ref2","_callee2","fetchOptions","_callee2$","_context2"],"sources":["C:/Users/Alexandre/Documents/GitHub/Projeto_Linos/react/src/hooks/useFetch.js"],"sourcesContent":["import {useState, useEffect} from 'react';\r\n\r\n\r\nexport const useFetch = (url) => {\r\n    const [data, setData] = useState(null);\r\n    const [config, setConfig] = useState(null);\r\n    const [method, setMethod] = useState(null);\r\n    const [callFetch, setCallFetch] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error,setError] = useState(null);\r\n\r\n    const httpConfig = (data, method) => {\r\n        if(method === \"POST\"){\r\n            setConfig({\r\n                method,\r\n                headers: {\r\n                    \"Content-Type\" : \"application/json\"\r\n                },\r\n                body: JSON.stringify(data)\r\n            });\r\n\r\n            setMethod(method);\r\n        };\r\n    }\r\n\r\n    useEffect(() => { // pega a requisição\r\n\r\n        const fetchData = async () => {\r\n\r\n            //loading\r\n            setLoading(true);\r\n\r\n            try {\r\n                \r\n            const res = await fetch(url);\r\n            const json = await res.json();\r\n\r\n            setData(json);\r\n\r\n            } catch (error) {\r\n                console.log(error.message);\r\n                setError(\"Houve algum erro ao carregar os dados\");\r\n            }\r\n\r\n            setLoading(false);\r\n        };\r\n\r\n        fetchData();\r\n\r\n    }, [url , callFetch]);\r\n\r\n    useEffect(() => { // verifica as requisições e atualiza\r\n        const httpRequest = async () => {\r\n            if(method === \"POST\"){\r\n                let fetchOptions = [url , config];\r\n                const res = await fetch(...fetchOptions);\r\n    \r\n                const json = await res.json();\r\n    \r\n                setCallFetch(json);\r\n            }\r\n        }\r\n        httpRequest();\r\n    }, [config, method, url]);\r\n\r\n\r\n    return {data , httpConfig, loading, error};\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}